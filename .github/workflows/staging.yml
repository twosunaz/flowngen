# .github/workflows/staging.yml

name: Staging Pipeline

on:
    push:
        branches:
            - staging

jobs:
    build-and-test:
        runs-on: ubuntu-latest

        steps:
            - name: ğŸ“¥ Checkout Code
              uses: actions/checkout@v3

            - name: ğŸ§° Set up Node.js
              uses: actions/setup-node@v3
              with:
                  node-version: '18'

            - name: ğŸ“¦ Install Dependencies
              run: |
                  corepack enable
                  pnpm install

            - name: ğŸ§¼ Lint Check
              run: pnpm lint || true # Replace with your actual lint command

            - name: ğŸ§ª Run Tests
              run: pnpm test || true # Replace with your actual test command

            - name: ğŸ³ Build Docker Image (staging)
              run: docker build -f Dockerfile -t flowise-staging .

            - name: âœ… Docker Image Built Successfully
              run: echo "Docker build for staging completed!"
